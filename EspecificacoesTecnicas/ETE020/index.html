<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>ETE020 - Cadastrar Entrada - e-SUS AF - Documentação Negocial</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "ETE020 - Cadastrar Entrada";
        var mkdocs_page_input_path = "EspecificacoesTecnicas/ETE020.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> e-SUS AF - Documentação Negocial
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Especificações Técnicas</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../DocumentoDeMensagensv2/">Documento de Mensagens</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DocumentoDeRegrasv2/">Documento de Regras</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Especificações</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../ETE001/">ETE001 - Realizar Login</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE002/">ETE002 - Cadastrar Usuário do Sistema</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE003/">ETE003 - Recuperar Senha</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE004/">ETE004 - Consultar Permissões de Acesso</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE005/">ETE005 - Atribuir Perfil de Acesso</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE006/">ETE006 - Detalhar Permissão de Acesso</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE007/">ETE007 - Consultar Meus Perfis</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE008/">ETE008 - Solicitar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE009/">ETE009 - Detalhar Meu Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE010/">ETE010 - Consultar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE011/">ETE011 - Cadastrar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE012/">ETE012 - Detalhar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE013/">ETE013 - Consultar Entes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE014/">ETE014 - Cadastrar Ente</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE015/">ETE015 - Consultar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE016/">ETE016 - Cadastrar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE017/">ETE017 - Editar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE018/">ETE018 - Detalhar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE019/">ETE019 - Consultar Entrada</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">ETE020 - Cadastrar Entrada</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#descricao">Descrição</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prototipo-001">Protótipo 001</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#acesso">Acesso</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#criterios-de-aceite">Critérios de Aceite</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prototipo-002">Protótipo 002</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#acesso_1">Acesso</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#criterios-de-aceite_1">Critérios de Aceite</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prototipo-003">Protótipo 003</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#acesso_2">Acesso</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#criterios-de-aceite_2">Critérios de Aceite</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prototipo-004">Protótipo 004</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#criterios-de-aceite_3">Critérios de Aceite</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE021/">ETE021 - Editar Entrada</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE022/">ETE022 - Detalhar Entrada</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE023/">ETE023 - Consultar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE024/">ETE024 - Cadastrar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE025/">ETE025 - Editar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE026/">ETE026 - Detalhar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE027/">ETE027 - Emitir Relatório de Posição de Estoque</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE028/">ETE028 - Detalhar Relatório de Posição de Estoque</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE029/">ETE029 - Consultar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE030/">ETE030 - Cadastrar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE031/">ETE031 - Editar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE032/">ETE032 - Detalhar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE033/">ETE033 - Gestão de Integrações</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE034/">ETE034 - Configurar Integração Barramento AF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE035/">ETE035 - Detalhar Integração Barramento AF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE036/">ETE036 - Atualizar Dados Cadastrais de Integração Barramento AF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE037/">ETE037 - Gestão de Estoques</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE038/">ETE038 - Autenticação com GOV.BR</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE039/">ETE039 - Transferência de Produtos entre Estabelecimentos</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE040/">ETE040 - Requisição de produtos para estabelecimentos</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE041/">ETE041 - Configurar transmissão SI Bnafar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE042/">ETE042 - Transmitir dados SI Bnafar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE043/">ETE043 - Visualizar transmissão federal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE044/">ETE044 - Gestão de integração Cartão Nacional de Saúde</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE045/">ETE045 - Consultar Dispensação</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE046/">ETE046 - Detalhar dispensação</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE047/">ETE047 - Detalhar Relatório de Dispensação/Fornecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE048/">ETE048 - Detalhar Relatório de Movimentações</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE049/">ETE049 - Emitir Relatório de Dispensação/Fornecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE050/">ETE050 - Emitir Relatório de Movimentações</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE051/">ETE051 - Estornar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE052/">ETE052 - Gerenciar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE053/">ETE053 - Cadastrar dispensação/fornecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE054/">ETE054 - Estornar dispensação</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Modelos</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-dominios/">Dominios</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-historias/">Histórias</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-mensagens/">Mensagens</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-regras/">Regras</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">e-SUS AF - Documentação Negocial</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Especificações Técnicas</li>
          <li class="breadcrumb-item">Especificações</li>
      <li class="breadcrumb-item active">ETE020 - Cadastrar Entrada</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ete020-cadastrar-entrada">ETE020 - Cadastrar Entrada</h1>
<h2 id="descricao">Descrição</h2>
<p>Como usuário quero cadastrar uma entrada de produto(s) para adicioná-lo(s) ao estoque do estabelecimento de saúde logado</p>
<h2 id="prototipo-001">Protótipo 001</h2>
<p>[Inserir imagem] <!-- <img alt="alt text" src="../imagens/ete-020-prot-001-temp.png" /> --></p>
<h3 id="acesso">Acesso</h3>
<p>Menu lateral &gt; Movimentações &gt; Entrada &gt; acionar botão “novo”. </p>
<h3 id="criterios-de-aceite">Critérios de Aceite</h3>
<ol>
<li>O usuário somente pode acessar a funcionalidade caso tenha permissão; <a href="../DocumentoDeRegrasv2/#rgn001">RGN001</a></li>
<li>
<p>No campo “Modalidade de Licitação”, o sistema deve apresentar as opções:</p>
<ul>
<li>Concorrência </li>
<li>Convite </li>
<li>Dispensa de licitação </li>
<li>Inexigibilidade </li>
<li>Ministério da Saúde </li>
<li>Pregão </li>
<li>Requisição </li>
<li>Tomada de preço </li>
</ul>
</li>
<li>
<p>No campo “Tipo de Movimentação”, o sistema deve apresentar as opções: </p>
<ul>
<li>Ajuste de estoque  </li>
<li>Entrada ordinária  </li>
<li>Entrada por estorno  </li>
<li>Entrada por estorno de dispensação  </li>
<li>Produção própria  </li>
<li>Saída por estorno  </li>
<li>Saldo de implantação </li>
</ul>
<p>Exceto os tipos de movimentação criados para entradas geradas automaticamente pelo sistema: </p>
<ul>
<li>“Entrada por Estorno de Saída” </li>
<li>“Entrada por Estorno de Dispensação” </li>
<li>“Entrada por Estorno de Distribuição”  </li>
</ul>
</li>
<li>
<p>No campo “Tipo de Documento”, o sistema deve apresentar as opções:
    A. Aviso 
    B. Boletim 
    C. Carta 
    D. Certidão 
    E. Circular 
    F. Comprovante 
    G. Contrato 
    H. Convênio 
    I. Decreto 
    J. Despacho 
    K. Edital 
    L. Fax 
    M. Guia 
    N. Guia de remessa 
    O. Instrução Normativa 
    P. Memorando 
    Q. Mensagem 
    R. Nota Fiscal 
    S. Nota Fiscal Eletrônica 
    T. Ofício </p>
</li>
<li>
<p>Quando o usuário selecionar “Saldo de Implantação” ou “Ajuste de Estoque” no campo “Tipo de Movimentação”, os campos a seguir deixam de ser obrigatórios:</p>
<ul>
<li>“Modalidade de Licitação”</li>
<li>“CNES/CNPJ” (fornecedor)</li>
<li>“Razão Social” (fornecedor)</li>
<li>“Tipo de Documento”</li>
<li>“Número do Documento”</li>
<li>“Data do Documento”   </li>
</ul>
<p>Ao selecionar a opção “Produção Própria” no campo “Tipo de Movimentação”, os campos a seguir deixam de ser obrigatórios:</p>
<ul>
<li>“Tipo de Documento”</li>
<li>“Número do Documento”</li>
<li>“Data do Documento” <a href="../DocumentoDeRegrasv2/#rgn024">RGN024</a></li>
</ul>
</li>
<li>
<p>O sistema deve validar a data do documento informada: </p>
<ul>
<li>Caso a data seja posterior a data atual, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg018">MSG018</a>; </li>
<li>Caso a data seja anterior a 1 ano da data atual, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg019">MSG019</a>; </li>
</ul>
</li>
<li>O campo “Valor do Documento” deve ser desabilitado para edição, com valor inicial 0 (zero) e o sistema deve calculá-lo automaticamente somando todos os valores totais dos produtos adicionados à entrada e apresentado em reais (R$) com até 2 dígitos após a virgula, realizando o arredondamento do valor se necessário. <a href="../DocumentoDeRegrasv2/#rgn026">RGN026</a> <a href="../DocumentoDeRegrasv2/#rgn028">RGN028</a>; </li>
<li>Quando o usuário informar o CNES ou CNPJ do fornecedor e acionar a consulta, o sistema deve:  <ul>
<li>Validar o CNES ou CNPJ. Caso o dado seja inválido, o sistema deve realçar o campo e alertar ao usuário. <a href="../DocumentoDeMensagensv2/#msg015">MSG015</a>; </li>
<li>Recuperar e apresentar o nome do fornecedor do CNES informado, através da integração com o portal do Cadastro Nacional dos Estabelecimentos de Saúde (CNES). Caso não seja encontrado um estabelecimento para o dado informado, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeRegrasv2/#rgn020">RGN020</a> <a href="../DocumentoDeRegrasv2/#rgn021">RGN021</a> <a href="../DocumentoDeMensagensv2/#msg017">MSG017</a>; </li>
<li>Recuperar e apresentar a razão social do fornecedor do CNPJ informado, através da integração com o portal da Receita Federal do Brasil (RFB). Caso não seja encontrado a pessoa jurídica para o CNPJ, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeRegrasv2/#rgn020">RGN020</a> <a href="../DocumentoDeRegrasv2/#rgn021">RGN021</a> <a href="../DocumentoDeMensagensv2/#msg017">MSG017</a>. </li>
</ul>
</li>
<li>O campo “Data do Recebimento” dever ser preenchido automaticamente com a data atual e habilitado para edição;</li>
<li>O sistema deve validar a data de recebimento informada: <ul>
<li>Caso a data seja posterior a data atual, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg020">MSG020</a>; </li>
<li>Caso a data seja anterior a 1 ano da data atual, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg021">MSG021</a>;</li>
</ul>
</li>
<li>O campo “Data do Armazenamento” dever ser preenchido automaticamente com a data atual e desabilitado para edição; </li>
<li>O campo “Em Análise” pode ser selecionado enquanto o(s) produtos da entrada não for(em) armazenado(s). Quando for selecionado, o sistema desabilita o botão “Armazenar”; </li>
<li>
<p>Quando o usuário acionar a opção de “Salvar”, o sistema deve verificar se: </p>
<ul>
<li>Existe uma entrada com o mesmo tipo, número de documento e fornecedor de uma entrada armazenada ou em preenchimento para o estabelecimento. Caso sim, o sistema apresenta uma mensagem de alerta ao usuário e permanece na tela de cadastro da entrada. <a href="../DocumentoDeRegrasv2/#rgn029">RGN029</a> <a href="../DocumentoDeMensagensv2/#msg028">MSG028</a>;</li>
</ul>
<p>Atendendo a validações, o sistema grava o registro da entrada com estado “Ativo” e a situação “Em preenchimento”, mantêm os campos habilitados para edição, permanece na tela de cadastro da entrada e apresenta o campo “Produto(s)”. <a href="../DocumentoDeMensagensv2/#msg031">MSG031</a> <a href="../DocumentoDeMensagensv2/#msg030">MSG030</a> <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>;</p>
</li>
<li>
<p>Quando o usuário acionar a opção “Limpar”, o sistema deve apresentar a mensagem de alerta ao usuário. Caso confirme a ação, limpar os campos preenchidos e permanecer na tela de cadastro da entrada. Caso a ação não seja confirmada, não limpar os dados informados e permanecer na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg065">MSG065</a>; </p>
</li>
<li>Quando o usuário acionar a opção de “Voltar” ou “Consultar”, o sistema deve apresentar a mensagem de alerta ao usuário. Caso confirme a ação, retornar à tela de consulta as entradas e não salvar as edições realizadas. Caso a ação não seja confirmada, permanece na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg006">MSG006</a>;</li>
<li>O sistema deve gravar a data, hora e CPF e nome do usuário que a executou qualquer ação de alteração no estado do registro. 
<a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>.</li>
</ol>
<h2 id="prototipo-002">Protótipo 002</h2>
<p>[Inserir imagem] <!-- <img alt="alt text" src="../imagens/ete-020-prot-002.png" /> --></p>
<h3 id="acesso_1">Acesso</h3>
<p>Menu lateral &gt; Movimentações &gt; Entrada &gt; acionar botão “novo”&gt; “Produtos” </p>
<h3 id="criterios-de-aceite_1">Critérios de Aceite</h3>
<ol>
<li>
<p>No campo “Produto” quando o usuário informar: </p>
<ul>
<li>O Código de Barras do produto, o sistema deve: <ul>
<li>Recuperar o produto relacionado ao código de barras da base de dados de medicamentos. <a href="../DocumentoDeRegrasv2/#rgn015">RGN015</a>;</li>
<li>Emitir um alerta ao usuário caso o sistema não encontre o produto na base de dados de medicamentos. <a href="../DocumentoDeMensagensv2/#msg022">MSG022</a>;</li>
<li>Limpar o campo Produto, quando o dado de código de barras for apagado. </li>
</ul>
</li>
<li>O Princípio Ativo ou Nome Comercial de um Medicamento ou Descrição do Produto para Saúde, o sistema deve: <ul>
<li>Emitir um alerta ao usuário caso o sistema não encontre o produto na base de dados de medicamentos ou produtos para saúde. <a href="../DocumentoDeMensagensv2/#msg022">MSG022</a>; </li>
<li>Apresentar a lista de produtos ativos no sistema correspondestes ao valor informado no campo autocomplete a partir da indicação do 3º caractere. <a href="../DocumentoDeRegrasv2/#rgn015">RGN015</a>. </li>
</ul>
</li>
</ul>
</li>
<li>
<p>O usuário deve selecionar o produto que deseja adicionar na lista produtos ativos no sistema; </p>
</li>
<li>O sistema não deve permitir adicionar um produto já relacionado à entrada. <a href="../DocumentoDeMensagensv2/#msg023">MSG023</a>. </li>
</ol>
<h2 id="prototipo-003">Protótipo 003</h2>
<p>[Inserir imagem] <!-- <img alt="alt text" src="../imagens/ete-020-prot-003-temp.png" /> --></p>
<h3 id="acesso_2">Acesso</h3>
<p>Menu lateral &gt; Movimentações &gt; Entrada &gt; acionar botão “novo”&gt; “Produtos” </p>
<h3 id="criterios-de-aceite_2">Critérios de Aceite</h3>
<ol>
<li>Quando o usuário realizar a busca de um produto e selecioná-lo, o sistema deve incluí-lo a lista de produtos adicionados à entrada. A lista será expansiva, permitindo o preenchimento dos campos de detalhamento do produto. <a href="../DocumentoDeRegrasv2/#rgn023">RGN023</a>;</li>
<li>O(s) produto(s) adicionado(s) à entrada pode(m) ser excluído(s), antes de ser armazenados no sistema. <a href="../DocumentoDeRegrasv2/#rgn025">RGN025</a>;</li>
<li>O campo “Qtd Total” deve ser desabilitado para edição e o sistema deve:  <ul>
<li>Recuperar automaticamente a quantidade informada no campo “Qtd. Recebida” quando apenas um detalhamento do produto for adicionado; </li>
<li>Calcular automaticamente somando todas as quantidades informadas nos detalhamentos adicionados ao produto. <a href="../DocumentoDeRegrasv2/#rgn037">RGN037</a>;</li>
</ul>
</li>
<li>O campo “Valor Unitário” será carregado automaticamente com o dado informado neste campo no primeiro detalhamento do produto adicionado, ser apresentado em reais (R$) com até 9 dígitos após a virgula e desabilitado para edição; </li>
<li>O campo “Valor Total” deve ser desabilitado para edição, calculado automaticamente através da fórmula: Qtd Total Recebida X Valor Unitário do produto e apresentado em reais (R$) com até 2 dígitos após a virgula, realizando o arredondamento do valor se necessário. <a href="../DocumentoDeRegrasv2/#rgn027">RGN027</a> <a href="../DocumentoDeRegrasv2/#rgn028">RGN028</a>;</li>
<li>No detalhamento do Produto, o sistema deve verificar se: <ul>
<li>A data de validade informada é anterior ou igual à data atual ou com vencimento superior a 10 anos e emitir um alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg024">MSG024</a>;</li>
<li>A quantidade recebida do produto é inferior a 1 e emitir um alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg025">MSG025</a>;</li>
<li>O valor unitário informado para o produto é inferior a 0 e emitir um alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg026">MSG026</a>.</li>
</ul>
</li>
<li>No campo “Valor Unitário” no detalhamento do Produto, o sistema deve:  <ul>
<li>Apresentá-lo em reais (R$) com até 2 dígitos após a virgula;</li>
<li>Atribuir o mesmo valor unitário informado no primeiro detalhamento desse produto aos demais detalhamentos e desabilitar o campo para edição.   </li>
</ul>
</li>
<li>
<p>No campo “Programa de Saúde” no detalhamento do Produto, o sistema deve apresentar as opções: </p>
<ol>
<li>JUDICIALIZAÇÃO </li>
<li>ALIMENTAÇÃO E NUTRIÇÃO </li>
<li>ALZHEIMER </li>
<li>ANTIMICROBIANO </li>
<li>ASSISTÊNCIA FARMACÊUTICA </li>
<li>ASSISTÊNCIA FARMACÊUTICA BÁSICA </li>
<li>ASSISTÊNCIA FARMACÊUTICA SESAI </li>
<li>ASSISTÊNCIA SOCIAL </li>
<li>ATENÇÃO SECUNDÁRIA </li>
<li>BRUCELOSE </li>
<li>CALAMIDADE PÚBLICA </li>
<li>COAGULOPATIAS </li>
<li>CÓLERA </li>
<li>COQUELUCHE </li>
<li>COVID-19 </li>
<li>DENGUE </li>
<li>DIABETES </li>
<li>DOENÇA DE CHAGAS </li>
<li>DOENÇA DE PARKISON </li>
<li>ENXERTO CONTRA HOSPEDEIRO  </li>
</ol>
</li>
<li>
<p>No campo “Condições Especiais de Armazenamento” no detalhamento do Produto, o sistema deve apresentar as opções:</p>
<ul>
<li>Climatizado (15°C a 30°C)</li>
<li>Congelado (Abaixo de 0°C)</li>
<li>Resfriado (2°C a 8°C)</li>
<li>Sem Condições Especiais</li>
<li>Outros. </li>
</ul>
</li>
<li>
<p>No campo “Endereçamento Físico” no detalhamento do Produto, o sistema deve: </p>
<ul>
<li>Desabilitá-lo para edição quando o estabelecimento não possuir um endereçamento físico cadastrado e ativo; </li>
<li>Preenche-lo automaticamente com endereçamento físico quando o estabelecimento possuir apenas um endereço cadastrado e ativo; </li>
<li>Apresentar a lista de endereçamentos físicos cadastrados e ativos para o estabelecimento quando este possuir mais de um endereço. </li>
</ul>
</li>
<li>Quando o usuário informar o CNES ou CNPJ do fabricante e acionar a consulta, o sistema deve: <ul>
<li>Validar o CNES ou CNPJ. Caso o dado seja inválido, o sistema deve realçar o campo e alertar ao usuário. <a href="../DocumentoDeMensagensv2/#msg015">MSG015</a>;</li>
<li>Recuperar e apresentar o nome do fabricante do CNES informado, através da integração com o portal do Cadastro Nacional dos Estabelecimentos de Saúde (CNES). Caso não seja encontrado um estabelecimento para o dado informado, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeRegrasv2/#rgn020">RGN020</a> <a href="../DocumentoDeRegrasv2/#rgn021">RGN021</a> <a href="../DocumentoDeMensagensv2/#msg045">MSG045</a>;</li>
<li>Recuperar e apresentar a razão social do fabricante do CNPJ informado, através da integração com o portal da Receita Federal do Brasil (RFB). Caso não seja encontrado a pessoa jurídica para o CNPJ, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeRegrasv2/#rgn020">RGN020</a> <a href="../DocumentoDeRegrasv2/#rgn021">RGN021</a> <a href="../DocumentoDeMensagensv2/#msg045">MSG045</a>;</li>
</ul>
</li>
<li>O sistema deve permitir adicionar mais de um detalhamento ao produto, permitindo a entrada do mesmo produto com lotes e datas de validades diferentes; </li>
<li>O sistema não deve permitir adicionar um detalhamento com o mesmo Nº do Lote e Data de Validade de um detalhamento já vinculado o produto na entrada. <a href="../DocumentoDeMensagensv2/#msg027">MSG027</a>;</li>
<li>Quando o usuário acionar a opção “Incluir”, o sistema deve gravar os dados do detalhamento e os apresentar na lista contendo: Nº do Lote, Data de Validade, Qtd Recebida e Programa de Saúde, com as ações “Excluir” para cada registro;   </li>
<li>Quando o usuário acionar a opção “Limpar”, o sistema deve limpar os campos preenchidos no detalhamento; </li>
<li>Quando o usuário acionar a opção “Excluir” o registro de um detalhamento, o sistema deve excluí-lo da lista de detalhamento(s) do produto. <a href="../DocumentoDeRegrasv2/#rgn016">RGN016</a>;</li>
<li>
<p>Quando o usuário acionar a opção “Armazenar”, o sistema deve verificar se: </p>
<ul>
<li>Existe ao menos um produto relacionado à entrada. Caso não, o sistema apresenta uma mensagem de alerta ao usuário e permanece na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg030">MSG030</a>;</li>
<li>O detalhamento de todos os produtos da entrada foi incluído. Caso não, o sistema apresenta uma mensagem de alerta ao usuário e permanece na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg029">MSG029</a>.</li>
</ul>
<p>Atendendo as validações, o sistema efetiva o cadastro da entrada, mantém o estado do registro como “Ativo” e a situação como “Armazenada”, armazena os produtos no estoque do estabelecimento, apresenta a mensagem de sucesso, retorna à tela de consulta às entradas e apresenta este registro como o primeiro da relação das entradas cadastradas para o estabelecimento. <a href="../DocumentoDeMensagensv2/#msg044">MSG044</a> <a href="../DocumentoDeRegrasv2/#rgn030">RGN030</a> <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>.  </p>
</li>
<li>
<p>O sistema, identificando que uma entrada de produto(s) foi armazenada, deve creditar a quantidade no saldo deste(s), considerando lote, validade e programa de saúde e atualizar a posição de estoque do estabelecimento que realizou a entrada. <a href="../DocumentoDeRegrasv2/#rgn031">RGN031</a>;</p>
</li>
<li>
<p>Quando o usuário acionar a opção de “Salvar Parcial”, o sistema deve verificar se: </p>
<ul>
<li>Existe ao menos um detalhamento vinculado ao(s) produto(s) da entrada. Caso não, o sistema apresenta uma mensagem de alerta ao usuário e permanece na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg029">MSG029</a>;</li>
</ul>
<p>Atendendo as validações, o sistema mantém o registro da entrada com estado “Ativo” e a situação “Em preenchimento” e permanece na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg031">MSG031</a> <a href="../DocumentoDeRegrasv2/#rgn030">RGN030</a> <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>;</p>
</li>
<li>
<p>Quando o usuário acionar a opção de “Voltar” ou “Consultar”, o sistema deve apresentar a mensagem de alerta ao usuário. Caso confirme a ação, retornar à tela de consulta as entradas e não salvar as edições realizadas. Caso a ação não seja confirmada, permanece na tela de cadastro da entrada. <a href="../DocumentoDeMensagensv2/#msg006">MSG006</a>;</p>
</li>
<li>O sistema deve gravar a data, hora e CPF e nome do usuário que a executou qualquer ação de alteração no estado do registro. <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>.</li>
</ol>
<h2 id="prototipo-004">Protótipo 004</h2>
<p><img alt="alt text" src="../../imagens/ete-020-prot-004.png" /></p>
<h3 id="criterios-de-aceite_3">Critérios de Aceite</h3>
<ol>
<li>O acesso aos dados de um detalhamento do produto da entrada é realizado quando o usuário acionar a opção “Detalhar” no cadastro da entrada; </li>
<li>O sistema deve recuperar e apresentar os dados relacionados ao detalhamento do produto da entrada que o usuário deseja detalhar;</li>
<li>Caso algum campo retornar vazio, o sistema deve apresentar a descrição “Sem informação”;  </li>
<li>Quando o usuário acionar a opção “Sair”, o sistema deve retornar à tela de “Cadastro da Entrada”. </li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ETE019/" class="btn btn-neutral float-left" title="ETE019 - Consultar Entrada"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ETE021/" class="btn btn-neutral float-right" title="ETE021 - Editar Entrada">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../ETE019/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ETE021/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
