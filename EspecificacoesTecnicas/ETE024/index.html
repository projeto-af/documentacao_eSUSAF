<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>ETE024 - Cadastrar Saída - e-SUS AF - Documentação Negocial</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "ETE024 - Cadastrar Sa\u00edda";
        var mkdocs_page_input_path = "EspecificacoesTecnicas/ETE024.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> e-SUS AF - Documentação Negocial
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Especificações Técnicas</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../DocumentoDeMensagensv2/">Documento de Mensagens</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DocumentoDeRegrasv2/">Documento de Regras</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Especificações</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../ETE001/">ETE001 - Realizar Login</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE002/">ETE002 - Cadastrar Usuário do Sistema</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE003/">ETE003 - Recuperar Senha</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE004/">ETE004 - Consultar Permissões de Acesso</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE005/">ETE005 - Atribuir Perfil de Acesso</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE006/">ETE006 - Detalhar Permissão de Acesso</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE007/">ETE007 - Consultar Meus Perfis</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE008/">ETE008 - Solicitar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE009/">ETE009 - Detalhar Meu Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE010/">ETE010 - Consultar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE011/">ETE011 - Cadastrar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE012/">ETE012 - Detalhar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE013/">ETE013 - Consultar Entes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE014/">ETE014 - Cadastrar Ente</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE015/">ETE015 - Consultar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE016/">ETE016 - Cadastrar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE017/">ETE017 - Editar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE018/">ETE018 - Detalhar Estabelecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE019/">ETE019 - Consultar Entrada</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE020/">ETE020 - Cadastrar Entrada</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE021/">ETE021 - Editar Entrada</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE022/">ETE022 - Detalhar Entrada</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE023/">ETE023 - Consultar Saída</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">ETE024 - Cadastrar Saída</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#descricao">Descrição</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prototipo-001">Protótipo 001</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#acesso">Acesso</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#criterios-de-aceite">Critérios de Aceite</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prototipo-002">Protótipo 002</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#acesso_1">Acesso</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#criterios-de-aceite_1">Critérios de Aceite</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE025/">ETE025 - Editar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE026/">ETE026 - Detalhar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE027/">ETE027 - Emitir Relatório de Posição de Estoque</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE028/">ETE028 - Detalhar Relatório de Posição de Estoque</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE029/">ETE029 - Consultar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE030/">ETE030 - Cadastrar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE031/">ETE031 - Editar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE032/">ETE032 - Detalhar Usuário SUS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE033/">ETE033 - Gestão de Integrações</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE034/">ETE034 - Configurar Integração Barramento AF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE035/">ETE035 - Detalhar Integração Barramento AF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE036/">ETE036 - Atualizar Dados Cadastrais de Integração Barramento AF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE037/">ETE037 - Gestão de Estoques</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE038/">ETE038 - Autenticação com GOV.BR</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE039/">ETE039 - Transferência de Produtos entre Estabelecimentos</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE040/">ETE040 - Requisição de produtos para estabelecimentos</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE041/">ETE041 - Configurar transmissão SI Bnafar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE042/">ETE042 - Transmitir dados SI Bnafar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE043/">ETE043 - Visualizar transmissão federal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE044/">ETE044 - Gestão de integração Cartão Nacional de Saúde</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE045/">ETE045 - Consultar Dispensação</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE046/">ETE046 - Detalhar dispensação</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE047/">ETE047 - Detalhar Relatório de Dispensação/Fornecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE048/">ETE048 - Detalhar Relatório de Movimentações</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE049/">ETE049 - Emitir Relatório de Dispensação/Fornecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE050/">ETE050 - Emitir Relatório de Movimentações</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE051/">ETE051 - Estornar Saída</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE052/">ETE052 - Gerenciar Perfil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE053/">ETE053 - Cadastrar dispensação/fornecimento</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ETE054/">ETE054 - Estornar dispensação</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Modelos</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-dominios/">Dominios</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-historias/">Histórias</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-mensagens/">Mensagens</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modelos/modelo-doc-regras/">Regras</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">e-SUS AF - Documentação Negocial</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Especificações Técnicas</li>
          <li class="breadcrumb-item">Especificações</li>
      <li class="breadcrumb-item active">ETE024 - Cadastrar Saída</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ete024-cadastrar-saida">ETE024 - Cadastrar Saída</h1>
<h2 id="descricao">Descrição</h2>
<p>Como usuário quero cadastrar uma saída de produto(s) para retirá-lo(s) do estoque do estabelecimento de saúde logado. </p>
<h2 id="prototipo-001">Protótipo 001</h2>
<p>[Inserir imagem] <!-- <img alt="alt text" src="../imagens/ete-024-prot-001.png" /> --></p>
<h3 id="acesso">Acesso</h3>
<p>Menu lateral &gt; Movimentação &gt; Saída &gt; Consultar saída &gt; Botão Novo </p>
<h3 id="criterios-de-aceite">Critérios de Aceite</h3>
<ol>
<li>O usuário somente pode acessar a funcionalidade caso tenha permissão. <a href="../DocumentoDeRegrasv2/#rgn001">RGN001</a>;</li>
<li>O sistema deve apresentar os seguintes campos: Nº da Saída, Tipo de Saída, Data da Saída, Valor Total Saída, CNES/CNPJ do Estabelecimento de Destino, opção Lupa Estabelecimento de Destino, Departamento de Destino, Tipo de Documento, Nº do Documento, Data do documento, Justificativa, Detalhar Justificativa e as opções “Salvar” e “Limpar”;</li>
<li>No campo “Tipo de Saída” o sistema deve apresentar as opções: Ajuste de Estoque, Amostra, Exposição e Análise, Apreensão Sanitária, Distribuição sem Requisição, Empréstimo, Perda, Requisição, Roubo, Saída para Departamento, Transferência, Usuário SUS não Identificado, Validade Vencida. Exceto os tipos criados para saídas geradas automaticamente pelo sistema: “Saída por Estorno de Entrada” e “Saída por Dispensação”;</li>
<li>Quando o usuário selecionar no campo “Tipo de Saida” a opção: Ajuste de Estoque, Amostra, Exposição e Análise, Apreensão Sanitária, Perda, Usuário SUS Não Identificado, Validade Vencida, o sistema deve preencher os campos “CNES/CNPJ do Estabelecimento de Destino" e "Estabelecimento de Destino” com os dados do estabelecimento logado e mantendo-os desabilitados para edição e desabilitar para edição o campo: “Departamento de Destino”. <a href="../DocumentoDeRegrasv2/#rgn065">RGN065</a>;</li>
<li>Quando o usuário selecionar no campo “Tipo de Saida” a opção: "Distribuição sem Requisição" ou “Empréstimo” ou “Requisição” ou "Transferência", o sistema deve habilitar e tornar obrigatório o preenchimento dos campos "CNES/CNPJ do Estabelecimento de Destino" e "Estabelecimento de Destino” e manter desabilitado para edição o campo “Departamento de Destino”. <a href="../DocumentoDeRegrasv2/#rgn065">RGN065</a>;<ul>
<li>O sistema deve verificar se CNES/CNPJ do Estabelecimento de Destino informado é igual ao do CNES/CNPJ do Estabelecimento logado. Caso sim, deve emitir mensagem de alerta ao usuário. <a href="../DocumentoDeRegrasv2/#rgn064">RGN064</a> <a href="../DocumentoDeMensagensv2/#msg095">MSG095</a>;</li>
<li>Quando o usuário acionar a opção “Lupa” após informar o CNES/CNPJ do Estabelecimento de Destino, o sistema deve recuperar e apresentar o nome fantasia do estabelecimento dentre os cadastrados na instância. </li>
</ul>
</li>
<li>Quando o usuário selecionar no campo “Tipo de Saida” a opção: "Saída para Departamento", o sistema deve preencher os campos “CNES/CNPJ do Estabelecimento de Destino" e "Estabelecimento de Destino” com os dados do estabelecimento logado e mantendo-os desabilitados para edição e habilitar e tornar obrigatório a seleção de um item no campo "Departamento de Destino". <a href="../DocumentoDeRegrasv2/#rgn065">RGN065</a>;<ul>
<li>No campo "Departamento de Destino", o sistema deve recuperar e apresentar para seleção a relação dos departamentos cadastrados para o estabelecimento logado. </li>
</ul>
</li>
<li>O campo “Data da Saída” dever ser preenchido automaticamente com a data atual e desabilitado para edição; </li>
<li>O campo “Valor Total da Saída” deve ser desabilitado para edição, calculado automaticamente somando todos os valores totais dos produtos adicionados à saída e apresentado em reais (R$) com até 2 dígitos após a virgula, realizando o arredondamento do valor se necessário. <a href="../DocumentoDeRegrasv2/#rgn038">RGN038</a> <a href="../DocumentoDeRegrasv2/#rgn028">RGN028</a>;</li>
<li>No campo “Tipo de Documento” o sistema deve apresentar as opções: Aviso, Boletim, Carta, Certidão, Circular, Comprovante, Contrato, Convênio, Decreto, Despacho, Edital, Fax, Guia, Guia De Remessa, Instrução Normativa, Memorando, Mensagem, Nota Fiscal, Nota Fiscal Eletrônica, Ofício, Ordem De Serviço, Parecer, Portaria, Prescrição Médica, Requerimento, Requisição, Resolução; </li>
<li>No campo “Justificativa” o sistema deve apresentar as opções: Ajuste de estoque, Demanda ordinária, Descarte ou devolução a fornecedores, Devolução e empréstimos, Doação, Outros, Quebra do produto/medicamento, Recebimento maior que a demanda, Recebimento próximo da validade, Roubo, Sistema inoperante e Transferência;  </li>
<li>
<p>Quando o usuário acionar a opção de “Salvar”, o sistema deve verificar se: </p>
<ul>
<li>Existe uma saída com o mesmo tipo de saída, tipo e número de documento e justificativa de uma saída registrada ou em preenchimento para o estabelecimento. Caso sim, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeRegrasv2/#rgn044">RGN044</a> <a href="../DocumentoDeMensagensv2/#msg038">MSG038</a>;</li>
</ul>
<p>Atendendo a validações, o sistema grava o registro da saída com estado “Ativo” e a situação “Em preenchimento”, mantêm os campos habilitados para edição, permanece na tela de cadastro da saída e apresenta o campo “Produto(s)”. <a href="../DocumentoDeMensagensv2/#msg031">MSG031</a> <a href="../DocumentoDeRegrasv2/#rgn045">RGN045</a> <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>.</p>
</li>
<li>
<p>Quando o usuário acionar a opção “Limpar”, o sistema limpa os campos preenchidos e permanecer na tela de cadastro da saída;   </p>
</li>
<li>Quando o usuário acionar a opção de “Voltar” ou “Consultar”, o sistema retorna à tela de consulta as saídas e não salvar as edições realizadas;  </li>
<li>O sistema deve gravar a data, hora e CPF e nome do usuário que a executou qualquer ação de alteração no estado do registro. <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>.</li>
</ol>
<h2 id="prototipo-002">Protótipo 002</h2>
<p>[Inserir imagem] <!-- <img alt="alt text" src="../imagens/ete-024-prot-002.png" /> --></p>
<h3 id="acesso_1">Acesso</h3>
<p>Menu lateral &gt; Movimentação &gt; Saída &gt; Consultar saída &gt; Botão Novo &gt; Botão Salvar </p>
<h3 id="criterios-de-aceite_1">Critérios de Aceite</h3>
<ol>
<li>No campo “Produto” quando o usuário informar: <ul>
<li>O Princípio Ativo ou Nome Comercial de um Medicamento ou Descrição do Produto para Saúde, o sistema deve: <ul>
<li>Emitir um alerta ao usuário caso o sistema não encontre o produto na base de dados de medicamentos ou produtos para saúde. <a href="../DocumentoDeMensagensv2/#msg022">MSG022</a>; </li>
<li>Apresentar a lista de produtos ativos no sistema correspondestes ao valor informado no campo autocomplete a partir da indicação do 3º caractere. <a href="../DocumentoDeRegrasv2/#rgn015">RGN015</a>. </li>
</ul>
</li>
</ul>
</li>
<li>O usuário deve selecionar o produto que deseja adicionar na lista produtos ativos no sistema; </li>
<li>O sistema não deve permitir adicionar um produto já relacionado à saída; </li>
<li>Quando o usuário adicionar o produto, o sistema deve: <ul>
<li>Quando o usuário buscar por um produto, o sistema só lista produtos que possuam estoque no estabelecimento logado; <ul>
<li>“Validade Vencida”, o sistema verifica se existem lotes do produto vencidos ou a vencer nos próximos 90 dias em estoque. Caso não exista, emite um alerta ao usuário e limpa os campos preenchidos. <a href="../DocumentoDeRegrasv2/#rgn034">RGN034</a> <a href="../DocumentoDeMensagensv2/#msg033">MSG033</a>; </li>
<li>“Ajuste de Estoque”, “Apreensão Sanitária”, “Distribuição sem Requisição”, “Empréstimo”,  “Requisição”, “Saída para Departamento”, “Transferência” ou “Usuário SUS Não Identificado”, o sistema considera os lotes com a data de validade igual ou superior a data atual. <a href="../DocumentoDeRegrasv2/#rgn034">RGN034</a>;</li>
<li>“Amostra”, “Exposição e Análise”, “Perda” ou “Roubo”, o sistema considera todos os lotes independente da data de validade. <a href="../DocumentoDeRegrasv2/#rgn034">RGN034</a>.</li>
</ul>
</li>
</ul>
</li>
<li>O sistema deve apresentar a lista de produtos adicionados à saída por ordem alfabética. A lista será expansiva, permitindo o preenchimento dos campos de detalhamento do produto. <a href="../DocumentoDeRegrasv2/#rgn023">RGN023</a>; </li>
<li>O(s) produto(s) adicionado(s) à saída pode(m) ser excluído(s) desde que não tenha(m) detalhamento(s) vinculado(s) a ele. <a href="../DocumentoDeRegrasv2/#rgn035">RGN035</a>; </li>
<li>O campo “Qtd Estoque Atual” deve ser desabilitado para edição e carregado automaticamente com o saldo do produto em estoque do estabelecimento logado, no momento, independente de lote, validade, fabricante, programa de saúde e endereçamento físico. <a href="../DocumentoDeRegrasv2/#rgn036">RGN036</a>;</li>
<li>O campo “Qtd a Expedir” deve ser desabilitado para edição e o sistema deve: <ul>
<li>Recuperar automaticamente a quantidade informada no campo “Qtd a Expedir” quando apenas um detalhamento do produto for adicionado; </li>
<li>Calcular automaticamente somando todas as quantidades a expedir informadas nos detalhamentos adicionados ao produto. <a href="../DocumentoDeRegrasv2/#rgn039">RGN039</a>. <!-- "Não consegui reproduzir!!!! " --></li>
</ul>
</li>
<li>O campo “Qtd Expedida” deve ser desabilitado para edição e o sistema deve: <ul>
<li>Recuperar automaticamente a quantidade informada no campo “Qtd Expedida” quando apenas um detalhamento do produto for adicionado; </li>
<li>Calcular automaticamente somando todas as quantidades expedidas informadas nos detalhamentos adicionados ao produto. <a href="../DocumentoDeRegrasv2/#rgn066">RGN066</a>. <!-- "Não consegui reproduzir!!!! " --></li>
</ul>
</li>
<li>O campo “Valor Unitário” deve ser desabilitado para edição, calculado automaticamente através de uma média simples dos valores unitários informados na(s) entrada(s) deste produto, independente de lote, validade, fabricante, programa de saúde, endereçamento físico e apresentado em reais (R$) com até 9 dígitos após a virgula. <a href="../DocumentoDeRegrasv2/#rgn040">RGN040</a>; </li>
<li>O campo “Valor Total” deve ser desabilitado para edição, calculado automaticamente através da fórmula: Quantidade Expedida X Valor Unitário do produto e apresentado em reais (R$) com até 2 dígitos após a virgula, realizando o arredondamento do valor se necessário. <a href="../DocumentoDeRegrasv2/#rgn041">RGN041</a> <a href="../DocumentoDeRegrasv2/#rgn028">RGN028</a>;</li>
<li>Após adicionar o produto à Saída, no detalhamento, o sistema deve: <ul>
<li>Apresentar os campos: Nº do Lote, Data de Validade, Programa de Saúde, Endereçamento Físico, Qtd a expedir e Qtd Expedida habilitados para edição e os campos: Qtd Estoque, Valor Unitário e Valor Total desabilitados para edição; </li>
<li>No campo “Valor Unitário”, calcular automaticamente através de uma média simples dos valores unitários informados na(s) entrada(s) deste produto, independente de lote, validade, fabricante, programa de saúde, endereçamento físico e apresentá-lo em reais (R$) com até 9 dígitos após a virgula. <a href="../DocumentoDeRegrasv2/#rgn040">RGN040</a>;</li>
<li>No campo “Valor Total”, calcular automaticamente através da fórmula: Quantidade Expedida X Valor Unitário do produto e apresentá-lo em reais (R$) com até 2 dígitos após a virgula, realizando o arredondamento do valor se necessário. <a href="../DocumentoDeRegrasv2/#rgn041">RGN041</a><a href="../DocumentoDeRegrasv2/#rgn028">RGN028</a>;</li>
<li>No campo “Qtd Estoque”, recuperar e apresentar o saldo em estoque do produto à medida que for selecionado os campos “Lote”, ‘Data de Validade”, “Programa de Saúde” e “Endereçamento Físico”; </li>
<li>No campo “Qtd a Expedir”, permitir informar um valor independente do saldo em estoque do produto. <a href="../DocumentoDeRegrasv2/#rgn067">RGN067</a>;</li>
<li>Quando o usuário selecionar um lote, o sistema deve recuperar e apresentar as respectivas datas de validades, programas de saúde e endereçamentos físicos para seleção; <ul>
<li>Quando o usuário adicionar um detalhamento do produto à Saída, o sistema deve verificar se: </li>
</ul>
</li>
<li>Já existe um detalhamento com o mesmo Lote, Data de Validade, Programa de Saúde e Endereçamento Físico adicionado ao produto. Caso sim, o sistema deve emitir um alerta ao usuário e não permitir adicioná-lo na lista de detalhamentos. <a href="../DocumentoDeMensagensv2/#msg036">MSG036</a>;</li>
<li>A quantidade expedida não pode ser inferior a 1;</li>
<li>A quantidade expedida para o produto, lote, data de validade, programa de saúde e endereçamento físico é superior a quantidade disponível no estoque do estabelecimento, o sistema deve emitir um alerta ao usuário e limpar o valor informado no campo. MSG037 RGN043 </li>
</ul>
</li>
<li>O(s) detalhamento(s) vinculado(s) ao produto pode(m) ser excluído(s); </li>
<li>
<p>Quando o usuário acionar a opção “Registrar”, o sistema deve verificar se:  </p>
<ul>
<li>Existe ao menos um produto relacionado à Saída. Caso não, o sistema deve apresentar uma mensagem de alerta ao usuário. <a href="../DocumentoDeMensagensv2/#msg040">MSG040</a>; </li>
<li>O detalhamento de todos os produtos da Saída foi incluído. Caso não, o sistema deve apresentar uma mensagem de alerta ao usuário.<a href="../DocumentoDeMensagensv2/#msg029">MSG029</a>; </li>
</ul>
<p>Atendendo as validações, o sistema efetiva o cadastro da saída, grava o estado do registro como “Ativo” e a situação como “Dispensado/fornecido”, debita os produtos do estoque do estabelecimento, considerando lote, validade e programa de saúde, apresenta a mensagem de sucesso e retorna à tela de consulta às saídas apresentando este registro como o primeiro da relação das saídas cadastradas para o estabelecimento. <a href="../DocumentoDeMensagensv2/#msg039">MSG039</a> <a href="../DocumentoDeRegrasv2/#rgn045">RGN045</a> <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>; </p>
</li>
<li>
<p>O sistema, identificando que uma Saída de produto(s) foi registrada, deve debitar a quantidade no saldo deste(s), considerando lote, data de validade, programa de saúde e endereçamento físico e atualizar a posição de estoque do estabelecimento que realizou a Saída. <a href="../DocumentoDeRegrasv2/#rgn046">RGN046</a>; <!-- Não alterou, mas parece ser semelhante a acima. --></p>
<p>Atendendo as validações, o sistema grava o registro da saída com estado “Ativo” e a situação “Em preenchimento” e permanece na tela de cadastro da saída; <a href="../DocumentoDeMensagensv2/#msg031">MSG031</a> <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a> </p>
</li>
<li>
<p>O sistema deve gravar a data, hora e CPF e nome do usuário que a executou qualquer ação de alteração no estado do registro; <a href="../DocumentoDeRegrasv2/#rgn005">RGN005</a>. </p>
</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ETE023/" class="btn btn-neutral float-left" title="ETE023 - Consultar Saída"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ETE025/" class="btn btn-neutral float-right" title="ETE025 - Editar Saída">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../ETE023/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ETE025/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
