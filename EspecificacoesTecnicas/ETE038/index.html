<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../../img/favicon.ico" rel="shortcut icon"/>
<title>ETE038 - Configuração de integração SI BNAFAR - e-SUS AF - Documentação Negocial</title>
<link href="../../css/theme.css" rel="stylesheet"/>
<link href="../../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "ETE038 - Configura\u00e7\u00e3o de integra\u00e7\u00e3o SI BNAFAR";
        var mkdocs_page_input_path = "EspecificacoesTecnicas/ETE038.md";
        var mkdocs_page_url = null;
      </script>
<!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../.."> e-SUS AF - Documentação Negocial
        </a><div role="search">
<form action="../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Especificações Técnicas</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DocumentoDeMensagensv2/">Documento de Mensagens</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../DocumentoDeRegrasv2/">Documento de Regras</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current">Especificações</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ETE001/">ETE001 - Realizar Login</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE002/">ETE002 - Cadastrar Usuário do Sistema</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE003/">ETE003 - Recuperar Senha</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE004/">ETE004 - Consultar Permissões de Acesso</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE005/">ETE005 - Atribuir Perfil de Acesso</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE006/">ETE006 - Detalhar Permissão de Acesso</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE007/">ETE007 - Consultar Meus Perfis</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE008/">ETE008 - Solicitar Perfil</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE009/">ETE009 - Detalhar Meu Perfil</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE010/">ETE010 - Consultar Perfil</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE011/">ETE011 - Cadastrar Perfil</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE012/">ETE012 - Detalhar Perfil</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE013/">ETE013 - Consultar Entes</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE014/">ETE014 - Cadastrar Ente</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE015/">ETE015 - Consultar Estabelecimento</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE016/">ETE016 - Cadastrar Estabelecimento</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE017/">ETE017 - Editar Estabelecimento</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE018/">ETE018 - Detalhar Estabelecimento</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE019/">ETE019 - Consultar Entrada</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE020/">ETE020 - Cadastrar Entrada</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE021/">ETE021 - Editar Entrada</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE022/">ETE022 - Detalhar Entrada</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE023/">ETE023 - Consultar Saída</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE024/">ETE024 - Cadastrar Saída</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE025/">ETE025 - Editar Saída</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE026/">ETE026 - Detalhar Saída</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE027/">ETE027 - Emitir Relatório de Posição de Estoque</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE028/">ETE028 - Detalhar Relatório de Posição de Estoque</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE029/">ETE029 - Consultar Usuário SUS</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE030/">ETE030 - Cadastrar Usuário SUS</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE031/">ETE031 - Editar Usuário SUS</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE032/">ETE032 - Detalhar Usuário SUS</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE033/">ETE033 - Gestão de Integrações</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE034/">ETE034 - Configurar Integração Barramento AF</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE035/">ETE035 - Detalhar Integração Barramento AF</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE036/">ETE036 - Atualizar Dados Cadastrais de Integração Barramento AF</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE037/">ETE037 - Gestão de Estoques</a>
</li>
<li class="toctree-l2 current"><a class="reference internal current" href="#">ETE038 - Configuração de integração SI BNAFAR</a>
<ul class="current">
<li class="toctree-l3"><a class="reference internal" href="#historico-de-revisoes">Histórico de Revisões</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#resumo">Resumo</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#motivacao">Motivação</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#implementacao">Implementação</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#criterios-de-aceitacao">Critérios de Aceitação</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#modelo-de-dados">Modelo de Dados</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#elementos-de-interface">Elementos de Interface</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ETE039/">ETE039 - Autenticação com GOV.BR</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">Para Validação</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../validacao/ete023/">ETE023 - Consultar Saídas</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../validacao/ete024/">ETE024 - Cadastrar Saídas</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../validacao/ete025/">ETE025 - Editar Saídas</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../validacao/ete026/">ETE026 - Detalhar Saídas</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../validacao/ete029/">ETE029 - Estornar Saída</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../..">e-SUS AF - Documentação Negocial</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href="../.."></a></li>
<li class="breadcrumb-item">Especificações Técnicas</li>
<li class="breadcrumb-item">Especificações</li>
<li class="breadcrumb-item active">ETE038 - Configuração de integração SI BNAFAR</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="especificacao-tecnica-038-configuracao-de-integracao-si-bnafar">ESPECIFICAÇÃO TÉCNICA 038: CONFIGURAÇÃO DE INTEGRAÇÃO SI BNAFAR</h1>
<table>
<thead>
<tr>
<th><strong>ETE:</strong></th>
<th>038</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Título:</strong></td>
<td>Configuração de integração SI BNAFAR</td>
</tr>
<tr>
<td><strong>Autor:</strong></td>
<td>Jessé Azevêdo <a href="mailto:jesse.azevedo@saude.gov.br">jesse.azevedo@saude.gov.br</a></td>
</tr>
<tr>
<td><strong>Revisor:</strong></td>
<td>-</td>
</tr>
<tr>
<td><strong>Revisor:</strong></td>
<td>-</td>
</tr>
<tr>
<td><strong>Status:</strong></td>
<td>Em validação</td>
</tr>
<tr>
<td><strong>Versão:</strong></td>
<td>1.0</td>
</tr>
</tbody>
</table>
<h2 id="historico-de-revisoes">Histórico de Revisões</h2>
<table>
<thead>
<tr>
<th><strong>Versão</strong></th>
<th><strong>Data</strong></th>
<th><strong>Autor</strong></th>
<th><strong>Descrição</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0</td>
<td>23/02/2025</td>
<td>Jessé Azevêdo</td>
<td>Criação do documento</td>
</tr>
</tbody>
</table>
<h2 id="resumo">Resumo</h2>
<p>O SI BNAFAR é um serviço de interoperabilidade ofertado pelo Ministério da Saúde que possibilita a integração de sistemas de gestão da Assistência Farmacêutica com a Base Nacional de Dados de Ações e Serviços da Assistência Farmacêutica (BNAFAR). Este documento traz um conjunto de parâmetros que devem ser configurados no sistema de gestão da Assistência Farmacêutica para que a integração com o SI BNAFAR seja realizada com sucesso.</p>
<h2 id="motivacao">Motivação</h2>
<p>A publicação da <a href="https://www.conass.org.br/conass-informa-n-213-2024-publicada-a-portaria-gm-n-5713-que-altera-a-portaria-de-consolidacao-gm-ms-no-1-17-para-modificar-os-modelos-de-informacao-a-serem-adotados-pelos-entes-federados/#:~:text=Portaria%20GM%2FMS%20N%C2%BA%205.713%2C%20DE%209%20DE%20DEZEMBRO%20DE%202024&amp;text=II%20%E2%80%93%20Registro%20Eletr%C3%B4nico%20de%20Sa%C3%ADda,validade%20e%20demais%20situa%C3%A7%C3%B5es%20adversas.">Portaria GM/MS Nº 5713 de 09 de Dezembra de 2024</a> alterou os modelos de informação a serem adotados pelos entes federados, incluindo a obrigatoriedade de integração dos sistemas de gestão da Assistência Farmacêutica com a Base Nacional de Dados de Ações e Serviços da Assistência Farmacêutica (BNAFAR).<br/>
Uma vez que a portaria em questão estabelece a obrigatoriedade de integração dos sistemas de gestão da Assistência Farmacêutica com a BNAFAR, é necessário que o sistema de gestão da Assistência Farmacêutica possua mecanismos que permitam a configuração dos parâmetros necessários para a integração com o SI BNAFAR.
Com este documento é possível detalhar os requisitos necessários para a implementação de funcionalidade que possibilita s gestão de credenciais ao SI BNAFAR nos termos dos parágrafos § 8º e § 9º do art. 391-D da Portaria GM/MS Nº 5713 de 09 de Dezembro de 2024, cujo texto se encontra na integra abaixo:</p>
<blockquote>
<p>Art. 391-D. É obrigatório o envio diário para a BNAFAR/SUS, pelos entes federativos, das informações de que trata o art. 391-A, as quais não poderão conter registros já transmitidos anteriormente.  </p>
<blockquote>
<p>§ 8º As Secretarias de Estado da Saúde, mediante pactuação na Comissão Intergestores Bipartite – CIB, poderão se responsabilizar pela transmissão das informações de que trata esta Portaria, da totalidade ou de parte das Secretarias Municipais de Saúde de seu território, a ser encaminhada ao Ministério da Saúde relacionando o conjunto de entes federados que irão compor o arranjo organizativo.<br/>
§ 9º As Secretarias de Saúde poderão realizar a transmissão das informações de que trata esta Portaria por meio de Consórcio Público, mediante pactuação na Comissão Intergestores Bipartite – CIB, que deverá ser encaminhada ao Ministério da Saúde relacionando o conjunto de entes federados que irão compor o arranjo organizativo.” (NR)</p>
</blockquote>
</blockquote>
<p>Com a finalidade de atender a legislação vigente, o e-SUS AF deverá possuir recursos para gerenciar as credenciais de acesso ao SI BNAFAR, atribuindo a responsabilidade do envio a uma credencial devidamente autorizada. Bem como um fluxo de aprovação deverá ser implementado para garantir a segurança dos entes representados por um consórcio público ou Estado. </p>
<h2 id="implementacao">Implementação</h2>
<p>Para entender a melhor forma de implementar a configuração de integração com o SI BNAFAR, é necessário compreender o fluxo de envio de informações para a BNAFAR/SUS. Existe 3 fluxos possíveis para a gestão do envio de dados para a BNAFAR/SUS, são eles:  </p>
<ol>
<li>O ente federado envia diretamente as informações para a BNAFAR/SUS.</li>
<li>O ente federado envia as informações para a BNAFAR/SUS por meio de uma Secretaria de Estado da Saúde.</li>
<li>O ente federado envia as informações para a BNAFAR/SUS por meio de um Consórcio Público.  </li>
</ol>
<p><strong>Diagrama de sequência 01: Ente opta por cadastrar credenciais para a gestão de seu dado.</strong> </p>
<div class="mermaid">
    sequenceDiagram
    box Envio Direto
        participant Ente as Ente Federado
        participant MS as Ministério da Saúde
        participant e-SUS AF
        participant BNAFAR as SI BNAFAR-SUS
    end
    Ente-&gt;&gt;MS: Solicita credenciais de acesso
    activate MS
    MS-&gt;&gt;Ente: Aprova credenciais de acesso ao SI BNAFAR
    deactivate MS
    Ente-&gt;&gt;e-SUS AF: Configura credenciais de acesso
    activate e-SUS AF
    e-SUS AF-&gt;&gt;Ente: Confirmação de configuração
    deactivate e-SUS AF
    e-SUS AF-&gt;&gt;BNAFAR: Envio de informações
    activate BNAFAR
    BNAFAR-&gt;&gt;e-SUS AF: Confirmação de recebimento
    deactivate BNAFAR
    e-SUS AF-&gt;&gt;BNAFAR: Verifica status de processamento
    activate BNAFAR
    BNAFAR-&gt;&gt;e-SUS AF: Retorna status de processamento
    e-SUS AF-&gt;&gt;e-SUS AF: Atualiza status de envio
    deactivate BNAFAR
    Ente-&gt;&gt;e-SUS AF: Verifica status de envio
    activate e-SUS AF
    e-SUS AF-&gt;&gt;Ente: Retorna status diário de envio ao SI BNAFAR
    deactivate e-SUS AF
</div>
<p><strong>Diagrama de sequência 02: Secretaria de Estado de Saúde envia conjunto de dados de seus municípios</strong></p>
<div class="mermaid">
    sequenceDiagram
    box
        participant SES as Secretaria de Estado da Saúde
        participant SMS as Secretaria Municipal de Saúde
        participant MS as Ministério da Saúde
        participant e-SUS AF
        participant BNAFAR as SI BNAFAR-SUS
    end
    SES-&gt;&gt;e-SUS AF: Adiciona conjunto de municípios para o qual passará a encaminhar dados
    activate e-SUS AF
    e-SUS AF-&gt;&gt;SES: Confirmação de configuração
    e-SUS AF-&gt;&gt;SMS: Notifica sobre a inclusão do município no arranjo organizativo
    SMS-&gt;&gt;e-SUS AF: Confirmação de inclusão
    e-SUS AF-&gt;&gt;SES: Notifica sobre a inclusão do município no arranjo organizativo
    deactivate e-SUS AF
    SES-&gt;&gt;MS: Solicita credenciais de acesso
    activate MS
    MS-&gt;&gt;SES: Aprova credenciais de acesso ao SI BNAFAR
    deactivate MS
    SES-&gt;&gt;e-SUS AF: Configura credenciais de acesso
    activate e-SUS AF
    e-SUS AF-&gt;&gt;SES: Confirmação de configuração
    deactivate e-SUS AF
    e-SUS AF-&gt;&gt;BNAFAR: Envio de informações
    activate BNAFAR
    BNAFAR-&gt;&gt;e-SUS AF: Confirmação de recebimento
    deactivate BNAFAR
    e-SUS AF-&gt;&gt;BNAFAR: Verifica status de processamento
    activate BNAFAR
    BNAFAR-&gt;&gt;e-SUS AF: Retorna status de processamento
    e-SUS AF-&gt;&gt;e-SUS AF: Atualiza status de envio
    deactivate BNAFAR
    SES-&gt;&gt;e-SUS AF: Verifica status de envio
    activate e-SUS AF
    e-SUS AF-&gt;&gt;SES: Retorna status diário de envio ao SI BNAFAR
    SMS-&gt;&gt;e-SUS AF: Verifica status de envio
    e-SUS AF-&gt;&gt;SMS: Retorna status diário de envio ao SI BNAFAR
    deactivate e-SUS AF
</div>
<p><strong>Diagrama de sequência 03: Consórcio Público envia conjunto de dados de entes consorciados</strong></p>
<div class="mermaid">
    sequenceDiagram
    box
        participant Consórcio as Consórcio Público
        participant Ente as Ente Federado
        participant MS as Ministério da Saúde
        participant e-SUS AF
        participant BNAFAR as SI BNAFAR-SUS
    end
    Consórcio-&gt;&gt;e-SUS AF: Adiciona conjunto de entes para o qual passará a encaminhar dados
    activate e-SUS AF
    e-SUS AF-&gt;&gt;Consórcio: Confirmação de configuração
    e-SUS AF-&gt;&gt;Ente: Notifica sobre a inclusão do ente no arranjo organizativo
    Ente-&gt;&gt;e-SUS AF: Confirmação de inclusão
    e-SUS AF-&gt;&gt;Consórcio: Notifica sobre a inclusão do ente no arranjo organizativo
    deactivate e-SUS AF
    Consórcio-&gt;&gt;MS: Solicita credenciais de acesso
    activate MS
    MS-&gt;&gt;Consórcio: Aprova credenciais de acesso ao SI BNAFAR
    deactivate MS
    Consórcio-&gt;&gt;e-SUS AF: Configura credenciais de acesso
    activate e-SUS AF
    e-SUS AF-&gt;&gt;Consórcio: Confirmação de configuração
    deactivate e-SUS AF
    e-SUS AF-&gt;&gt;BNAFAR: Envio de informações
    activate BNAFAR
    BNAFAR-&gt;&gt;e-SUS AF: Confirmação de recebimento
    deactivate BNAFAR
    e-SUS AF-&gt;&gt;BNAFAR: Verifica status de processamento
    activate BNAFAR
    BNAFAR-&gt;&gt;e-SUS AF: Retorna status de processamento
    e-SUS AF-&gt;&gt;e-SUS AF: Atualiza status de envio
    deactivate BNAFAR
    Consórcio-&gt;&gt;e-SUS AF: Verifica status de envio
    activate e-SUS AF
    e-SUS AF-&gt;&gt;Consórcio: Retorna status diário de envio ao SI BNAFAR
    Ente-&gt;&gt;e-SUS AF: Verifica status de envio
    e-SUS AF-&gt;&gt;Ente: Retorna status diário de envio ao SI BNAFAR
    deactivate e-SUS AF
</div>
<p>Entretanto é importante pontuar alguns pontos relevantes para a implementação da configuração de integração com o SI BNAFAR:</p>
<ol>
<li>O "dono do dado" é o ente federativo que o produziu, assumiremos a premissa de que independente do fluxo de envio de dados, o ente federativo é responśavel pelo monitoramento do envio do dado e das possíveis inconsistẽncias que o mesmo venha a apresentar.</li>
<li>O ente cujas credenciais passarão a ser usadas para envio de dados é co-responsável pelo envio, e deverá atuar ativamente no monitoramento do envio dos dados.</li>
<li>O ente federativo é responsável por garantir que as credenciais de acesso ao SI BNAFAR sejam utilizadas de forma segura e que o envio de dados seja realizado em conformidade com a periodicidade definida em portaria.</li>
</ol>
<p>Outro ponto de grande relevância é a necessidade de implementação de um fluxo de aprovação para a criação de um arranjo organizativo para envio de dados ao SI BNAFAR, este fluxo garante que um ente ceda a outra a responsabilidade do envio. Um ente não poderá, no contexto da aplicação, estar em mais de um arranjo organizativo ou estar em um arranjo organizativo e enviar dados diretamente ao SI BNAFAR.</p>
<p><strong>Diagrama de sequência 04: Fluxo de aprovação para criação de arranjo organizativo</strong></p>
<div class="mermaid">
    sequenceDiagram
    box
        participant SES as Secretaria de Estado da Saúde
        participant SMS as Secretaria Municipal de Saúde ou Consórcio Público
        participant e-SUS AF
        participant MS as Ministério da Saúde
    end
    SES-&gt;&gt;SMS: Pactuam em CIB a inclusão do ente no arranjo organizativo
    SES-&gt;&gt;e-SUS AF: Inclui entes em arranjo organizativo
    activate e-SUS AF
    e-SUS AF-&gt;&gt;SES: Confirmação de inclusão do ente no arranjo organizativo 
    e-SUS AF-&gt;&gt;SMS: Notifica sobre a inclusão do ente no arranjo organizativo
    SMS-&gt;&gt;e-SUS AF: Autoriza inclusão do ente no arranjo organizativo
    e-SUS AF-&gt;&gt;SES: Notifica sobre a autorização do ente no arranjo organizativo
    deactivate e-SUS AF
    SES-&gt;&gt;MS: Informa quanto a pactuação realizada e solicita acesso ao SI BNAFAR
    activate MS
    MS-&gt;&gt;SES: Dá ciência da pactuação e autoriza acesso ao SI BNAFAR
    deactivate MS    
</div>
<p>O fluxo de participação do ente num arranjo organizativo também obdece regras, e deve seguir o fluxo representado abaixo:</p>
<p><strong>Diagrama de sequência 05: Fluxo de participação do ente num arranjo organizativo</strong></p>
<div class="mermaid">stateDiagram-v2
    [*] --&gt; ParticipacaoSolicitada
    ParticipacaoSolicitada --&gt; ParticipacaoAtiva: SMS aceita
    ParticipacaoSolicitada --&gt; ParticipacaoRevogada: SMS recusa
    ParticipacaoAtiva --&gt; ParticipacaoRevogada: SES / Consórcio revoga
    ParticipacaoRevogada --&gt; ParticipacaoSolicitada: SES / Consórcio solicita novamente
</div>
<p><strong>Diagrama de fluxo 06: Fluxo de participação do ente num arranjo organizativo</strong></p>
<div class="mermaid">flowchart TD
    A[Estado ou Consórcio Solicita Participação do Ente] --&gt; B{Verifica se o ente está em outro arranjo}
    B --&gt;|Sim| C{Revogar arranjo atual?}
    C --&gt;|Sim| D[Revoga arranjo atual]
    D --&gt; E[Aprova solicitação]
    C --&gt;|Não| F[Reprova solicitação]
    B --&gt;|Não| G{Envia direto?}
    G --&gt;|Sim| H{Desativar credencial?}
    H --&gt;|Sim| I[Desativa credencial]
    I --&gt; E
    H --&gt;|Não| F
    G --&gt;|Não| J{Nenhum dos dois}
    J --&gt;|Sim| K{Aprovar solicitação?}
    K --&gt;|Sim| E
    K --&gt;|Não| F
    J --&gt;|Não| L{Cadastrar nova credencial?}
    L --&gt;|Sim| M[Cadastra nova credencial]
    L --&gt;|Não| F
    E --&gt; N[Fim]
    F --&gt; N
    M --&gt; N
</div>
<h2 id="criterios-de-aceitacao">Critérios de Aceitação</h2>
<ul>
<li>Deverá ser criado um novo perfil de nome "Gestor de Integrações" que poderá estar em escopo global ou restrito a um ente federativo.</li>
<li>O Usuário com o papel "Gestor" terá o mesmo conjunto de recursos que o perfil "Gestor de Integrações" em relação a configuração de integração com o SI BNAFAR no contexto de um ente.</li>
<li>O ator com perfil "Gestor de Integrações" deverá possuir permissão para gerenciar as credenciais de acesso ao SI BNAFAR.</li>
<li>O ator com perfil "Gestor de Integrações" deverá possuir permissão para gerenciar os entes federativos que farão parte do arranjo organizativo.</li>
<li>O ator com perfil "Gestor de Integrações" deverá possuir permissão para alterar a lista de entes federativos que farão parte do arranjo organizativo.</li>
<li>É de responsabilidade do perfil "Gestor de Integrações" garantir que as credenciais de acesso ao SI BNAFAR sejam utilizadas de forma segura e que o envio de dados seja realizado em conformidade com a periodicidade definida em portaria.</li>
<li>Embora o ator com o perfil "Gestor de Integrações" seja responsável pela configuração das credenciais de acesso ao SI BNAFAR, o ente federativo é co-responsável pelo monitoramento do envio do dado e das possíveis inconsistências que o mesmo venha a apresentar, tendo acesso aos status de envio de forma transparente.</li>
<li>Um ente adicionado num arranjo organizativo poderá declinar da participação a qualquer momento.</li>
<li>O ente que opte por responsabilizar-se por seus envios deverá configurar devidamente o seu acesso ao SI BNAFAR.</li>
<li>Os dados de acesso ao SI BNAFAR deverão ser armazenados em banco de dados e deverão ser devidamente criptografados de forma a garantir a segurança das credenciais.</li>
<li>Uma vez que o ente federativo tenha configurado as credenciais de acesso ao SI BNAFAR, o sistema deverá permitir o envio de informações para o SI BNAFAR.</li>
<li>Deverá ser possível ao ente alterar a senha de acesso à SI BNAFAR ou mesmo desativar o envio de dados por meio da configuração realizada a qualquer momento.</li>
<li>A configuração de envio de dados ao SI BNAFAR deverrá estar em estado inativo até que credenciais estejam cadastradas.</li>
<li>O cadastro com CNPJ indica que o ente federativo é um consórcio público, e deverá ser possível adicionar entes federativos ao consórcio, só podendo ser alterado em escopo global.</li>
<li>Se a configuração ocorrer no escopo de ente, poderá incluir entes federativos no arranjo organizativo apenas se o ente federativo for um Estado.</li>
<li>Um ente não pode estar em mais de um arranjo organizativo.</li>
<li>Um ente não pode estar em um arranjo organizativo e enviar dados diretamente ao SI BNAFAR.</li>
<li>Só deve ser possível aprovar a participação de um ente num arranjo organizativo se o ente não estiver em outro arranjo organizativo.</li>
<li>Só deve ser possível cadastrar credenciais de acesso ao SI BNAFAR se o ente não estiver em outro arranjo organizativo.</li>
</ul>
<h2 id="modelo-de-dados">Modelo de Dados</h2>
<p>Conjunto de dados 1: Credenciais de acesso ao SI BNAFAR</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Nível</th>
<th style="text-align: left;">Atributo</th>
<th style="text-align: left;">Descrição</th>
<th style="text-align: left;">Cardinalidade</th>
<th style="text-align: left;">Tipo de Dado</th>
<th style="text-align: left;">Tamanho</th>
<th style="text-align: left;">Formato</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CNPJ</td>
<td style="text-align: left;">Cadastro do responsável pelo envio de dados se Consórcio Público</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">xx.xxxxxx/xxxx-xx</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Razão Social</td>
<td style="text-align: left;">Razão Social do estabelecimento credenciado</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Nome Fantasia</td>
<td style="text-align: left;">Nome Fantasia do estabelecimento credenciado</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">UF</td>
<td style="text-align: left;">UF do responsável pelo envio de dados estado ou município</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Município</td>
<td style="text-align: left;">Município do responsável pelo envio de dados</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Nome do responsável</td>
<td style="text-align: left;">Nome do responsável pelo envio de dados</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPF</td>
<td style="text-align: left;">CPF do responsável pelo envio de dados</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">xxx.xxx.xxx-xx</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">E-mail</td>
<td style="text-align: left;">E-mail do responsável pelo envio de dados</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Telefone</td>
<td style="text-align: left;">Telefone do responsável pelo envio de dados</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">(xx) xxxx-xxxx</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Usuário SI BNAFAR</td>
<td style="text-align: left;">Usuário de acesso ao SI BNAFAR criptografado</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Senha SI BNAFAR</td>
<td style="text-align: left;">Senha de acesso ao SI BNAFAR criptografado</td>
<td style="text-align: left;">0..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Situação</td>
<td style="text-align: left;">Campo enumerado com o estado da configuração</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p>Conjunto de dados 2: Entes federativos que farão parte do arranjo organizativo</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Nível</th>
<th style="text-align: left;">Atributo</th>
<th style="text-align: left;">Descrição</th>
<th style="text-align: left;">Cardinalidade</th>
<th style="text-align: left;">Tipo de Dado</th>
<th style="text-align: left;">Tamanho</th>
<th style="text-align: left;">Formato</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Identificador do responsável pelo envio</td>
<td style="text-align: left;">Identificador do responsável pelo envio dos dados</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Identificador da ente no e-SUS AF</td>
<td style="text-align: left;">Identificador do ente no e-SUS AF</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Situação</td>
<td style="text-align: left;">Campo enumerado com estado de participação do ente (Participação solicitada / Participação Recusada / Participação ativa)</td>
<td style="text-align: left;">1..1</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<div class="mermaid">---
title: Exemplo de diagrama para implementação das relações entre Responsável Envio e entes do arranjo organizativo
---
erDiagram
    RESPONSAVEL_ENVIO ||--o{ ENTE_ARRANJO : participa
</div>
<h2 id="elementos-de-interface">Elementos de Interface</h2>
<p><aguardando prototipação=""></aguardando></p>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../ETE037/" title="ETE037 - Gestão de Estoques"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../ETE039/" title="ETE039 - Autenticação com GOV.BR">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span><a href="../ETE037/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../ETE039/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script src="../../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "../..";</script>
<script src="../../js/theme_extra.js"></script>
<script src="../../js/theme.js"></script>
<script src="../../search/main.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>
