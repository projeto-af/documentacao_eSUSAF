# Especificação Técnica 011 - Cadastrar Perfil

## Descrição da funcionalidade
Como usuário quero cadastrar ou editar um perfil personalizado de acesso às funcionalidades do sistema, com suas respectivas permissões.

## Protótipo 001
[Inserir imagem] <!-- ![alt text](../imagens/ete-011-prot-001-temp.png) -->

## Acesso
Controle de Acesso > Gerenciar perfil > Acionar o botão “novo”

## Campos
|Autocomplete e Alfanumérico|
|---------------------------|

### Elementos de Tela:
* Bread Crumb – “Controle de Acesso / Gerenciar Perfil / Cadastro” 
* Título da página – “Cadastrar Perfil” 
* “Seta” – M - retorna para a Tela Consultar Perfis 
* “Consultar” – BT - retorna para a Tela Consultar Perfis 
* Perfil* – A (50) 
* “Salvar” – BT 
* “Item do Menu” – A (50)  
* “Expandir/Retrair” – M 
* “Subitem do Menu” – A (50)  
* “Funcionalidade” – SM 
* “Selecionar todos” – SU 
* “Cadastrar” – BT 
* “Limpar” – BT 

**Legenda**  
TIPO: A = Alfanumérico, N = Numérico, D = Data, M = Imagem, BT = Botão, LK = Link, SU = Seleção Única, SM = Seleção Múltipla, AC = Autocomplete, * = Obrigatório. 

### Critérios de aceite 
1. O usuário somente poderá acessar a funcionalidade caso tenha permissão; [RGN001](DocumentoDeRegrasv2.md#rgn001)
2. Quando o usuário acionar a opção “Salvar”, o sistema deve verificar se existe um perfil com a mesma descrição de um perfil já cadastrado para a instância. Caso sim, o sistema apresenta uma mensagem de alerta ao usuário e permanece na tela de cadastro do perfil; [RGN051](DocumentoDeRegrasv2.md#rgn051) [MSG077](DocumentoDeMensagensv2.md#msg077)
Atendendo a validações, o sistema grava o registro do perfil com estado e situação “Ativo” e apresenta a relação das permissões por funcionalidades para seleção e os botões “Cadastrar” e “Limpar”; [MSG031](DocumentoDeMensagensv2.md#msg031) [RGN005](DocumentoDeRegrasv2.md#rgn005)
3. Quando o usuário acionar a opção de “Cadastrar”, o sistema deve verificar se o preenchimento das informações atende às validações listadas, efetivar o cadastro do perfil, gravar o estado e a situação do registro como “Ativo”, apresentar a mensagem de sucesso e retornar à tela de consulta aos perfis apresentando este registro.  
4. Quando o usuário acionar a opção de “Limpar”, o sistema deve limpar os dados informados e permanece na tela de cadastro de perfil. 
5. Quando o usuário acionar a opção de “Voltar” ou “Consultar”, o sistema deve apresentar a mensagem de alerta ao usuário. Caso confirme a ação, retorna à tela de consulta aos perfis e não salva os dados incluídos. Caso a ação não seja confirmada, permanece na tela de cadastro de perfil;
6. O sistema deve gravar a data, hora e CPF e nome do usuário que a executou qualquer ação de alteração no registro. [RGN005](DocumentoDeRegrasv2.md#rgn005)

## Protótipo 002
[Inserir imagem] <!-- ![alt text](../imagens/ete-011-prot-003-temp.png) -->

### Descrição de funcionalidade

Eu como usuário após cadastrar um perfil, desejo configurar os acessos as funcionalidades no sistema.

### Acesso
Controle de Acesso > Gerenciar perfil >Consultar > acionar botão de “edição”. 

### Campos

|Autocomplete e Alfanumérico|Controle de acessos: Caixa de seleção|Estabelecimento|Entrada|
|---------------------------|-------------------------------------|---------------|-------|
|                           |1. Atribui uma permissão a usuário no contexto da aplicação                              |1. Alterar localizações físicas|       |
|                           |2. Atualiza dados de um perfil e seus recursos                                           |2. Atualizar dados de um departamento|       |
|                           |3. Cria ou altera perfis personalizados para um ente                                     |3. Atualizar dados de um farmacêutico|       |
|                           |4. Exclui um perfil da aplicação                                                         |4. Atualizar dados de um usuário do SUS para dispensação|       |
|                           |5. Lista detalhes de permissão/permissões atribuída a um usuário no contexto da Aplicação|5. Criar departamentos em um estabelecimento|       |
|                           |6. Lista detalhes de uma funcionalidade da aplicação                                     |6. Criar farmacêuticos em um estabelecimento|       |
|                           |7. Lista detalhes de um perfil específico                                                |7. Criar os usuários do SUS para dispensação|       |
|                           |8. Lista detalhes de um usuário da aplicação                                             |8. Criar ou Alterar um estabelecimento de Saúde|       |
|                           |9. Lista funcionalidades da aplicação                                                    |9. Criar ou Alterar um estabelecimento de Saúde|       |
|                           |10. Lista permissões atribuídas a usuários no contexto da aplicação                      |10. Criar ou localizações físicas|       |
|                           |                                                                                         |11. Detalhar localização física|        |
|                           |                                                                                         |12. Detalhar um estabelecimento de saúde|       |
|                           |                                                                                         |13. Exclui dados de um departamento num estabelecimento|       | 
|                           |                                                                                         |14. Excluir um farmacêutico|       |
|                           |                                                                                         |15. Excluir um usuário do SUS para dispensação|       |
|                           |                                                                                         |16. Listar departamentos existentes em um estabelecimento|       |
|                           |                                                                                         |17. Listar estabelecimentos de saúde|       |
|                           |                                                                                         |18. Listar farmacêuticos existentes em um estabelecimento|       |


### Elementos de tela
* Bread Crumb – “Controle de Acesso / Gerenciar Perfil / Cadastro” 
* Título da página – “Editar Perfil” 
* “Seta” – M - retorna para a Tela Consultar Perfis 
* “Consultar” – BT - retorna para a Tela Consultar Perfis 
* Perfil* – A - Inabilitado para a edição 
* “Item do Menu” – A (50)  
* “Expandir/Retrair” – M 
* “Subitem do Menu” – A (50)  
* “Funcionalidade” – SM 
* “Selecionar todos” – SU 
* “Atualizar” – BT 
* “Limpar” – BT 

**Legenda**  
TIPO: A = Alfanumérico, N = Numérico, D = Data, M = Imagem, BT = Botão, LK = Link, SU = Seleção Única, SM = Seleção Múltipla, AC = Autocomplete, * = Obrigatório. 

### Critérios de aceite
1. O usuário somente poderá acessar a funcionalidade caso tenha permissão; [RGN001](DocumentoDeRegrasv2.md#rgn001)
2. O sistema deve recuperar e apresentar os dados informados no cadastro do perfil, manter o campo “Perfil” inabilitado para edição e permitir a edição dos demais campos, além dos botões “Atualizar” e “Limpar”;  
3. Quando o usuário acionar a opção de “Atualizar”, o sistema deve verificar se o preenchimento das informações atende às validações listadas, atualizar o cadastro do perfil, manter e gravar o estado e a situação do registro como “Ativo”, apresentar a mensagem de sucesso e retornar à tela de consulta aos perfis apresentando este registro como o primeiro da relação dos perfis cadastrados para a instância; [RGN005](DocumentoDeRegrasv2.md#rgn005)
4. Quando o usuário acionar a opção de “Limpar”, o sistema deve limpar os dados informados e permanece na tela de cadastro de perfil. 
5. O sistema deve gravar a data, hora e CPF e nome do usuário que a executou qualquer ação de alteração no registro. [RGN005](DocumentoDeRegrasv2.md#rgn005)